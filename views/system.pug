extends layout.pug

block content
  #app-container(class="min-h-screen flex")
    include includes/sidebar.pug
    
    main(class="ml-64 flex-1 p-8 bg-slate-50 min-h-screen")
      #page-system.page-content.active
        header(class="mb-8")
          h2(class="text-2xl font-bold text-slate-800") 系统管理
          p(class="text-slate-500 text-sm") 用户角色、权限控制与操作审计

        .bg-white.rounded-2xl.shadow-sm.border.border-slate-200.overflow-hidden.mb-8
          .p-6.border-b.flex.justify-between.items-center
            h3(class="font-bold") 用户列表
            button(class="bg-blue-600 text-white px-3 py-1.5 rounded-lg text-xs font-bold")
              i(class="fas fa-user-plus mr-1")
              | 新建用户
          table(class="w-full text-left text-sm")
            thead(class="bg-slate-50 text-slate-500 font-bold text-xs uppercase")
              tr
                th(class="px-6 py-4") 用户名
                th(class="px-6 py-4") 角色
                th(class="px-6 py-4") 状态
                th(class="px-6 py-4") 最后登录
                th(class="px-6 py-4") 操作
            tbody(class="divide-y divide-slate-100")
              each user in users
                tr
                  td(class="px-6 py-4 font-bold")= user.username
                  td(class="px-6 py-4")
                    if user.role === 'ADMINISTRATOR'
                      span(class="bg-purple-100 text-purple-700 px-2 py-1 rounded text-[10px] font-bold")= user.role
                    else
                      span(class="bg-slate-100 text-slate-600 px-2 py-1 rounded text-[10px] font-bold")= user.role
                  td(class="px-6 py-4")
                    span(class="text-green-500 text-xs font-bold") ● Active
                  td(class="px-6 py-4 text-slate-500 text-xs")= user.lastLogin
                  td(class="px-6 py-4 text-slate-400")
                    if user.username === 'admin'
                      i(class="fas fa-lock text-xs mr-2")
                      | System
                    else
                      .space-x-2
                        button(class="text-blue-600 font-bold text-xs") 编辑
                        button(class="text-red-600 font-bold text-xs") 删除

        .bg-white.rounded-2xl.shadow-sm.border.border-slate-200.p-6
          h3(class="font-bold mb-4") 操作审计日志
          .space-y-4
            each log in auditLogs
              .flex.gap-4.items-start.text-sm.pb-4.border-b.border-slate-50
                span(class="font-mono text-slate-400 text-xs mt-1")= log.time
                div
                  p(class="font-bold text-slate-800")= log.action
                  p(class="text-xs text-slate-500")= log.details

  include includes/modals.pug